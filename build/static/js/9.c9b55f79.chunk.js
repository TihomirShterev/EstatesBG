(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[9],{40:function(e,t,r){"use strict";var n=r(36),a=r.n(n),s=r(37),i="https://estatesbg.herokuapp.com/api/users",o={authenticate:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n,s){var o,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(i+t,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});case 3:return o=e.sent,c=o.headers.get("Authorization"),document.cookie="auth-cookie=".concat(c),e.next=8,o.json();case 8:l=e.sent,c?("/register"===t&&r.email.match(/^[a-zA-Z0-9.-]{6,}@\w+.(com|bg)$/)&&r.password.length>=6&&r.rePassword===r.password&&r.email&&r.password&&r.rePassword||"/login"===t)&&n({email:l.email,id:l._id}):s(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),s(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n,a){return e.apply(this,arguments)}}(),getProfileInfo:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(i,"/profile?_id=").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=o},51:function(e,t,r){e.exports={login:"login_login__18RH6",register:"login_register__1XUst",tel:"login_tel__ebUy6",field:"login_field__IBFx3",error:"login_error__3PQdj","input-error":"login_input-error__1kawq"}},59:function(e,t,r){"use strict";r.r(t);var n=r(36),a=r.n(n),s=r(37),i=r(8),o=r(9),c=r(11),l=r(10),u=r(0),p=r(38),d=r(51),h=r.n(d),f=r(19),j=r(3),m=r(12),b=r(40),g=r(1),x=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).handleChange=function(e,t){var r={};r[t]=e.target.value,n.setState(r)},n.handleSubmit=function(){var e=Object(s.a)(a.a.mark((function e(t){var r,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.state,s=r.email,i=r.password,s&&i?n.setState({emptyFieldsError:!1}):n.setState({emptyFieldsError:!0}),e.next=5,b.a.authenticate("/login",{email:s,password:i},(function(e){n.setState({invalidInputError:!1}),n.context.logIn(e),n.props.history.push("/")}),(function(e){n.setState({invalidInputError:!0}),console.log("Error",e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",password:"",invalidInputError:!1,emptyFieldsError:!1},n}return Object(o.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.email,n=t.password,a=t.invalidInputError,s=t.emptyFieldsError,i=s?"Please fill all fields above":null,o=a&&!s?"Invalid email or password":null;return Object(g.jsxs)(p.a,{children:[Object(g.jsx)("form",{className:h.a.login,onSubmit:this.handleSubmit,children:Object(g.jsxs)("fieldset",{children:[Object(g.jsx)("h2",{children:"Login Form"}),Object(g.jsxs)("p",{className:h.a["field field-icon"],children:[Object(g.jsx)("label",{htmlFor:"email",children:Object(g.jsx)("span",{children:Object(g.jsx)("i",{className:"fas fa-envelope"})})}),Object(g.jsx)("input",{type:"text",name:"email",id:"email",value:r,onChange:function(t){return e.handleChange(t,"email")},placeholder:"pesho.peshev@gmail.com"})]}),Object(g.jsxs)("p",{className:h.a["field field-icon"],children:[Object(g.jsx)("label",{htmlFor:"password",children:Object(g.jsx)("span",{children:Object(g.jsx)("i",{className:"fas fa-lock"})})}),Object(g.jsx)("input",{type:"password",name:"password",id:"password",value:n,onChange:function(t){return e.handleChange(t,"password")},placeholder:"******"})]}),Object(g.jsx)("p",{className:h.a.error,children:o}),Object(g.jsx)("p",{className:h.a.error,children:i}),Object(g.jsx)("button",{type:"submit",children:"Login"}),Object(g.jsxs)("p",{className:h.a["text-center"],children:["No account yet?",Object(g.jsx)(f.b,{to:"/user/register",children:"Register"})]})]})}),this.context.loggedIn?Object(g.jsx)(j.a,{to:"/"}):null]})}}]),r}(u.Component);x.contextType=m.a,t.default=x}}]);
//# sourceMappingURL=9.c9b55f79.chunk.js.map