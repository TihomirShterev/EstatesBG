(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[11],{48:function(e,r,t){e.exports={login:"register_login__ZZOm_",register:"register_register__kF0f9",tel:"register_tel__PZfe2",field:"register_field__15Z9i",error:"register_error__NZZAW","input-error":"register_input-error__2aPJ_"}},56:function(e,r,t){"use strict";t.r(r);var s=t(37),a=t.n(s),n=t(38),l=t(8),o=t(9),i=t(11),c=t(10),d=t(0),p=t(36),h=t(48),j=t.n(h),u=t(19),m=t(3),b=t(12),f=t(1),g=function(e){Object(i.a)(t,e);var r=Object(c.a)(t);function t(e){var s;return Object(l.a)(this,t),(s=r.call(this,e)).handleChange=function(e,r){var t={};t[r]=e.target.value,s.setState(t)},s.handleSubmit=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,n,l,o,i,c,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),t=s.state,n=t.email,l=t.password,o=t.rePassword,0<n.length&&!n.match(/^[a-zA-Z0-9.-]{6,}@\w+.(com|bg)$/)?s.setState({emailError:!0}):s.setState({emailError:!1}),0<l.length&&l.length<6?s.setState({passwordError:!0}):s.setState({passwordError:!1}),0<o.length&&o!==l?s.setState({rePasswordError:!0}):s.setState({rePasswordError:!1}),n&&l&&o?s.setState({emptyFieldsError:!1}):s.setState({emptyFieldsError:!0}),e.prev=6,e.next=9,fetch("https://estatesbg.herokuapp.com/api/users/register",{method:"POST",body:JSON.stringify({email:n,password:l,rePassword:o}),headers:{"Content-Type":"application/json"}});case 9:return i=e.sent,c=i.headers.get("Authorization"),document.cookie="auth-cookie=".concat(c),e.next=14,i.json();case 14:(d=e.sent).email&&c&&o===l?(s.context.logIn({email:d.email,id:d._id}),s.props.history.push("/")):console.log("Error"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),console.log("Error",e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(r){return e.apply(this,arguments)}}(),s.state={email:"",password:"",rePassword:"",emailError:!1,passwordError:!1,rePasswordError:!1,emptyFieldsError:!1},s}return Object(o.a)(t,[{key:"render",value:function(){var e=this,r=this.state,t=r.email,s=r.password,a=r.rePassword,n=r.emailError?"Please enter a valid email":null,l=r.passwordError?"Please enter a valid password consisting at least 6 characters":null,o=r.rePasswordError?"Please enter a matching password":null,i=r.emptyFieldsError?"Please fill all fields above":null;return Object(f.jsxs)(p.a,{children:[Object(f.jsx)("form",{className:j.a.register,onSubmit:this.handleSubmit,children:Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("h2",{children:"Registration Form"}),Object(f.jsxs)("p",{className:j.a["field field-icon"],children:[Object(f.jsx)("label",{htmlFor:"email",children:Object(f.jsx)("span",{children:Object(f.jsx)("i",{className:"fas fa-envelope"})})}),Object(f.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:function(r){return e.handleChange(r,"email")},placeholder:"pesho.peshev@gmail.com"})]}),Object(f.jsx)("p",{className:j.a.error,children:n}),Object(f.jsxs)("p",{className:j.a["field field-icon"],children:[Object(f.jsx)("label",{htmlFor:"password",children:Object(f.jsx)("span",{children:Object(f.jsx)("i",{className:"fas fa-lock"})})}),Object(f.jsx)("input",{type:"password",name:"password",id:"password",value:s,onChange:function(r){return e.handleChange(r,"password")},placeholder:"******"})]}),Object(f.jsx)("p",{className:j.a.error,children:l}),Object(f.jsxs)("p",{className:j.a["field field-icon"],children:[Object(f.jsx)("label",{htmlFor:"rePassword",children:Object(f.jsx)("span",{children:Object(f.jsx)("i",{className:"fas fa-lock"})})}),Object(f.jsx)("input",{type:"password",name:"rePassword",id:"rePassword",value:a,onChange:function(r){return e.handleChange(r,"rePassword")},placeholder:"******"})]}),Object(f.jsx)("p",{className:j.a.error,children:o}),Object(f.jsx)("p",{className:j.a.error,children:i}),Object(f.jsx)("button",{type:"submit",children:"Create Account"}),Object(f.jsxs)("p",{className:j.a["text-center"],children:["Already registered?",Object(f.jsx)(u.b,{to:"/user/login",children:"Login"})]})]})}),this.context.loggedIn?Object(f.jsx)(m.a,{to:"/"}):null]})}}]),t}(d.Component);g.contextType=b.a,r.default=g}}]);
//# sourceMappingURL=11.31b98f1c.chunk.js.map