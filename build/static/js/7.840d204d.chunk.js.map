{"version":3,"sources":["services/itemService.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/pages/item/create/index.module.css","components/pages/item/create/index.js"],"names":["url","itemService","create","data","a","fetch","method","body","JSON","stringify","headers","getCookie","getOne","id","getAll","_arrayLikeToArray","arr","len","length","i","arr2","Array","_slicedToArray","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","o","minLen","n","prototype","toString","call","slice","constructor","name","from","test","TypeError","module","exports","CreatePage","useState","title","setTitle","imageURL","setImageURL","description","setDescription","titleError","setTitleError","imageURLError","setImageURLError","descriptionError","setDescriptionError","history","useHistory","handleSubmit","event","preventDefault","uploadImage","e","files","target","FormData","append","res","json","file","secure_url","titleErrorMessage","imageURLErrorMessage","descriptionErrorMessage","className","styles","onSubmit","src","alt","type","onChange","error","htmlFor","red","rows"],"mappings":"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","file":"static/js/7.840d204d.chunk.js","sourcesContent":["import getCookie from \"../utils/cookie\";\r\n\r\nconst url = 'https://estatesbg.herokuapp.com/api/items';\r\n\r\nconst itemService = {\r\n  create: async (data) => {\r\n    return fetch(`${url}/create`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': getCookie('auth-cookie')\r\n      }\r\n    });\r\n  },\r\n  getOne: async (id) => {\r\n    return fetch(`${url}/details?_id=${id}`);\r\n  },\r\n  getAll: async () => {\r\n    return fetch(`${url}/`);\r\n  }\r\n};\r\n\r\nexport default itemService;\r\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"create-item-form\":\"create_create-item-form__1Qb4u\",\"new-item-border\":\"create_new-item-border__25scd\",\"input\":\"create_input__3ETgB\",\"new-item-image\":\"create_new-item-image__3-s5a\",\"create-item-info\":\"create_create-item-info__3yyeG\",\"uploaded-image\":\"create_uploaded-image__2VLkZ\",\"header-background\":\"create_header-background__24DMY\",\"new-item-content\":\"create_new-item-content__24waf\",\"new-item-title\":\"create_new-item-title__1qi4S\",\"new-item-buttons\":\"create_new-item-buttons__2VYH2\",\"create-new-item-btn\":\"create_create-new-item-btn__1azPz\",\"error\":\"create_error__3Q9xV\",\"input-error\":\"create_input-error__2icjl\"};","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Layout from '../../../common/layout';\r\nimport styles from './index.module.css';\r\nimport itemService from '../../../../services/itemService';\r\n\r\nconst CreatePage = () => {\r\n  const [title, setTitle] = useState('');\r\n  const [imageURL, setImageURL] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [titleError, setTitleError] = useState(false);\r\n  const [imageURLError, setImageURLError] = useState(false);\r\n  const [descriptionError, setDescriptionError] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (title.length < 5) {\r\n      setTitleError(true);\r\n    } else {\r\n      setTitleError(false);\r\n    }\r\n\r\n    if (!imageURL) {\r\n      setImageURLError(true);\r\n    } else {\r\n      setImageURLError(false);\r\n    }\r\n\r\n    if (description.length < 10) {\r\n      setDescriptionError(true);\r\n    } else {\r\n      setDescriptionError(false);\r\n    }\r\n\r\n    if (title.length >= 5 && imageURL && description.length >= 10) {\r\n      await itemService.create({ title, imageURL, description });\r\n      history.push('/item');\r\n    }\r\n  };\r\n\r\n  const uploadImage = async (e) => {\r\n    const files = e.target.files;\r\n    const data = new FormData();\r\n    data.append('file', files[0]);\r\n    data.append('upload_preset', 'sofiapropertyrent');\r\n\r\n    const res = await fetch(\"https://api.cloudinary.com/v1_1/tyscloud/image/upload\",\r\n      {\r\n        method: 'POST',\r\n        body: data\r\n      });\r\n\r\n    const file = await res.json();\r\n    setImageURL(file.secure_url);\r\n  };\r\n\r\n  const titleErrorMessage = titleError ? 'Please enter a valid title consisting at least 5 characters' : null;\r\n  const imageURLErrorMessage = imageURLError ? 'Please upload a valid image' : null;\r\n  const descriptionErrorMessage = descriptionError ? 'Please enter a valid description consisting at least 10 characters' : null;\r\n\r\n  return (\r\n    <Layout>\r\n\r\n      <div className={styles[\"new-item-border\"]}>\r\n\r\n        <div className={styles[\"header-background\"]}>\r\n          <p>CREATE OFFER</p>\r\n        </div>\r\n\r\n        <form className={styles[\"create-item-form\"]} onSubmit={handleSubmit}>\r\n          <div className={styles[\"new-item-image\"]}>\r\n            {imageURL ? (<img className={styles[\"uploaded-image\"]} src={imageURL} alt=\"\" />) : null}\r\n            <input\r\n              type=\"file\"\r\n              name=\"imageURL\"\r\n              onChange={uploadImage}\r\n            />\r\n            <p className={styles.error}>\r\n              {imageURLErrorMessage}\r\n            </p>\r\n          </div>\r\n          <div className={styles[\"create-item-info\"]}>\r\n            <div className={styles[\"new-item-title\"]}>\r\n              <label htmlFor=\"title\">Title: <span className={styles.red}></span></label>\r\n              <input\r\n                type=\"text\"\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n                name=\"title\"\r\n                id=\"title\"\r\n              />\r\n              <p className={styles.error}>\r\n                {titleErrorMessage}\r\n              </p>\r\n            </div>\r\n            <div className={styles[\"new-item-content\"]}>\r\n              <label htmlFor=\"description\">Description: <span className={styles.red}></span></label>\r\n              <textarea\r\n                type=\"text\"\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n                name=\"description\"\r\n                id=\"description\"\r\n                rows=\"30\"\r\n                className=\"height\"\r\n              ></textarea>\r\n              <p className={styles.error}>\r\n                {descriptionErrorMessage}\r\n              </p>\r\n            </div>\r\n            <div className={styles[\"new-item-buttons\"]}>\r\n              <button className={styles[\"create-new-item-btn\"]} type=\"submit\">Create</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CreatePage;"],"sourceRoot":""}